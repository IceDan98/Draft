/* style.css - Воссозданная версия с комментариями */

/* --- Переменные --- */
:root {
    /* Базовые размеры и отступы */
    --gap-size: 0.5rem; /* Базовый отступ */
    --gap-half: calc(var(--gap-size) / 2);
    --gap-double: calc(var(--gap-size) * 2);

    /* Размеры элементов (используем vmin/vh для масштабируемости) */
    --ban-size: 5.5vmin;       /* Размер слота бана */
    --card-size: 12vh;         /* Размер карточки чемпиона */
    --nick-height: 3.5vh;      /* Высота поля для ника */
    --nick-font-size: 2.8vh;   /* Размер шрифта ника */
    --button-size: 4.2vh;      /* Базовый размер кнопки */
    --timer-font-size: 2vh;    /* Размер шрифта таймера */
    --score-size: 4.2vh;       /* Размер поля счета */
    --score-font-size: 2vh;    /* Размер шрифта счета */
    --filter-button-size: 3.8vh; /* Размер кнопки фильтра */
    --global-ban-icon-size: 6.4vh; /* Размер иконки глобального бана */
    --top-right-button-size: 2.5rem; /* Фиксированный размер кнопок вверху справа */

    /* Минимальные размеры элементов */
    --ban-min-size: 28px;
    --pick-min-height: 55px;
    --card-min-size: 63px;
    --nick-min-height: 16px;
    --button-min-size: 28px;
    --score-min-size: 28px;
    --team-name-min-height: 30px;
    --team-col-min-width: 240px; /* Мин. ширина колонки команды */
    --global-ban-icon-min-size: 35px;
    --top-right-button-min-size: 36px;

    /* --- Цвета: Темная тема (По умолчанию) --- */
    --color-background: #0a0f1f;        /* Основной фон */
    --color-surface-1: #10182f;         /* Фон поверхностей (чуть светлее) */
    --color-surface-2: #1a2340;         /* Фон элементов управления */
    --color-text-primary: #e0e8f0;      /* Основной цвет текста */
    --color-text-secondary: #8095b0;    /* Вторичный цвет текста */
    --color-text-placeholder: #556a88; /* Цвет плейсхолдеров */
    --color-border: #2a3858;            /* Цвет границ */
    --color-border-medium: #405075;     /* Цвет границ (средний) */
    --color-accent-gold: #c8aa6e;       /* Акцентный золотой */
    --color-accent-blue: #50a0f0;       /* Акцентный синий */
    --color-accent-red: #f05050;        /* Акцентный красный */
    --color-accent-green: #40f0a0;      /* Акцентный зеленый */
    --color-accent-purple: #a070f0;     /* Акцентный фиолетовый */
    --color-accent-blue-dark: #313850;  /* Темно-синий акцент (кнопка) */

    /* Цвета команд */
    --color-blue-team: var(--color-accent-blue);
    --color-red-team: var(--color-accent-red);
    --color-blue-bg-transparent: rgba(80, 160, 240, 0.4); /* Полупрозрачный фон синей колонки */
    --color-red-bg-transparent: rgba(240, 80, 80, 0.4);   /* Полупрозрачный фон красной колонки */

    /* Прочие цвета */
    --color-tooltip-bg: rgba(10, 15, 31, 0.9); /* Фон всплывающей подсказки */
    --color-tooltip-text: var(--color-text-primary);

    /* --- Тени --- */
    --shadow-sm: 0 1px 2px rgba(0,0,0,0.1);
    --shadow-md: 0 4px 6px rgba(0,0,0,0.15);
    --shadow-lg: 0 10px 15px rgba(0,0,0,0.2);
    --shadow-glow-gold: 0 0 10px 0px rgba(200, 170, 110, 0.5); /* Свечение для активных/выбранных элементов */
    --shadow-glow-blue: 0 0 10px 0px rgba(80, 160, 240, 0.5);
    --shadow-glow-red: 0 0 8px 0px rgba(240, 80, 80, 0.4);
}

/* --- Цвета: Светлая тема --- */
html[data-theme='light'] :root {
    --color-background: #FFFFFF;
    --color-surface-1: #F3F4F6;
    --color-surface-2: #E5E7EB;
    --color-text-primary: #111827;
    --color-text-secondary: #6B7280;
    --color-text-placeholder: #9CA3AF;
    --color-border: #D1D5DB;
    --color-border-medium: #9CA3AF;
    --color-accent-gold: #D97706;
    --color-accent-blue: #2563EB;
    --color-accent-red: #DC2626;
    --color-accent-green: #16A34A;
    --color-accent-purple: #7C3AED;
    --color-accent-blue-dark: #1E40AF;

    --color-blue-team: var(--color-accent-blue);
    --color-red-team: var(--color-accent-red);
    --color-blue-bg-transparent: rgba(37, 99, 235, 0.4);
    --color-red-bg-transparent: rgba(220, 38, 38, 0.4);
    --color-tooltip-bg: rgba(243, 244, 246, 0.95);
    --color-tooltip-text: var(--color-text-primary);

    --shadow-sm: 0 1px 2px rgba(0,0,0,0.05);
    --shadow-md: 0 4px 6px rgba(0,0,0,0.07);
    --shadow-lg: 0 10px 15px rgba(0,0,0,0.07);
    --shadow-glow-gold: 0 0 10px 0px rgba(217, 119, 6, 0.3);
    --shadow-glow-blue: 0 0 10px 0px rgba(37, 99, 235, 0.3);
    --shadow-glow-red: 0 0 8px 0px rgba(220, 38, 38, 0.3);
}

/* --- Базовые стили и Скроллбары --- */
html, body {
    height: 100%;
    margin: 0;
    padding: 0;
    /* Стилизация скроллбара для Firefox */
    scrollbar-color: var(--color-border-medium) var(--color-surface-1);
    scrollbar-width: thin;
}

/* Стилизация скроллбара для Webkit (Chrome, Safari) */
body::-webkit-scrollbar { width: 8px; }
body::-webkit-scrollbar-track { background: var(--color-surface-1); }
body::-webkit-scrollbar-thumb { background-color: var(--color-border-medium); border-radius: 4px; border: 2px solid var(--color-surface-1); }
/* Стили скроллбара для светлой темы */
html[data-theme='light'] body::-webkit-scrollbar-track { background: #F3F4F6; }
html[data-theme='light'] body::-webkit-scrollbar-thumb { background-color: #9CA3AF; border-color: #F3F4F6; }

body {
    font-family: 'Inter', sans-serif; /* Основной шрифт */
    background-color: var(--color-background);
    color: var(--color-text-primary);
    height: 100vh; /* Занимаем всю высоту окна */
    overflow: hidden; /* Предотвращаем скролл всей страницы */
    display: flex;
    justify-content: center;
    align-items: center;
}
/* Стили body для светлой темы */
html[data-theme='light'] body {
    background-color: #FFFFFF;
    color: #111827;
}

/* --- Основной контейнер и страницы --- */
#app-container {
    width: 100%;
    height: 100%;
    max-width: 2600px; /* Максимальная ширина */
    padding: var(--gap-size);
    box-sizing: border-box;
    display: flex;
    flex-direction: column;
    position: relative; /* Для позиционирования кнопок */
}

.page {
    width: 100%;
    height: 100%;
    display: flex;
    flex-direction: column;
    box-sizing: border-box;
}

.hidden {
    display: none !important; /* Утилитарный класс для скрытия элементов */
}

/* --- Индикатор загрузки --- */
#loadingIndicator {
    display: none; /* Скрыт по умолчанию */
    position: fixed; /* Поверх всего */
    inset: 0; /* Растягиваем на весь экран */
    background-color: rgba(10, 15, 31, 0.85); /* Полупрозрачный фон */
    align-items: center;
    justify-content: center;
    z-index: 1000;
    transition: opacity 0.5s ease-out;
}
#loadingIndicator.visible { display: flex; } /* Показываем при добавлении класса */
/* Стили индикатора для светлой темы */
html[data-theme='light'] #loadingIndicator {
    background-color: rgba(243, 244, 246, 0.85);
    color: #111827;
}
#loadingIndicator.hidden { display: none !important; }

/* --- Стили Домашней страницы --- */
#homePage {
    align-items: center;
    justify-content: center;
    text-align: center;
}

#homeTitle {
    font-family: 'Cinzel', serif; /* Специальный шрифт для заголовка */
    color: var(--color-accent-gold);
    text-shadow: 1px 1px 3px rgba(0,0,0,0.3);
    font-size: clamp(2rem, 6vmin, 3.5rem); /* Адаптивный размер шрифта */
    margin-bottom: 2rem;
}
html[data-theme='light'] #homeTitle { color: #D97706; }

.lobby-input {
    background-color: color-mix(in srgb, var(--color-surface-2), transparent 65%);
    border: 1px solid var(--color-border);
    padding: 0.5rem 1rem;
    border-radius: 0.375rem;
    margin-bottom: 1rem;
    width: 80%;
    max-width: 300px;
    text-align: center;
    text-shadow: none;
    font-family: 'Cinzel', serif; /* Шрифт как у заголовка */
    font-size: clamp(1rem, 2.5vh, 1.3rem);
    font-weight: 700;
}
#team1NameInput { color: var(--color-blue-team); }
#team2NameInput { color: var(--color-red-team); }
/* Стили инпутов для светлой темы */
html[data-theme='light'] .lobby-input {
    background-color: transparent;
    border-color: #D1D5DB;
    color: #111827;
}
html[data-theme='light'] #team1NameInput { color: #2563EB; }
html[data-theme='light'] #team2NameInput { color: #DC2626; }

.lobby-input::placeholder {
    color: var(--color-text-placeholder);
    text-shadow: none;
    font-family: 'Inter', sans-serif; /* Обычный шрифт для плейсхолдера */
    font-weight: 400;
}
html[data-theme='light'] .lobby-input::placeholder { color: #9CA3AF; }

#createLobbyButton {
    background-color: var(--color-accent-blue-dark);
    border: 1px solid var(--color-accent-blue-dark); /* Добавлена граница для консистентности */
    color: #FFFFFF;
    padding: 0.8rem 2rem;
    font-size: clamp(1rem, 2.5vh, 1.3rem);
    min-width: 150px;
    font-weight: 600;
    border-radius: 0.375rem;
    cursor: pointer;
    transition: background-color 0.2s ease, box-shadow 0.2s ease, transform 0.1s ease, border-color 0.2s ease;
    box-shadow: var(--shadow-md);
    margin-top: 1rem;
}
#createLobbyButton:hover:not(:disabled) {
    background-color: color-mix(in srgb, var(--color-accent-blue-dark), #fff 10%);
    border-color: color-mix(in srgb, var(--color-accent-blue-dark), #fff 15%);
    box-shadow: var(--shadow-lg);
}
#createLobbyButton:active:not(:disabled) {
    transform: scale(0.98);
    box-shadow: var(--shadow-sm);
}
/* Стили кнопки создания лобби для светлой темы */
html[data-theme='light'] #createLobbyButton {
    background-color: #2563EB;
    border-color: #2563EB;
    color: #FFFFFF;
}
html[data-theme='light'] #createLobbyButton:hover:not(:disabled) {
    background-color: color-mix(in srgb, #2563EB, #000 10%);
    border-color: color-mix(in srgb, #2563EB, #000 10%);
}

#lobbyLinksDisplay {
    margin-top: 2rem;
    background-color: var(--color-surface-1);
    padding: 1rem;
    border-radius: 0.5rem;
    border: 1px solid var(--color-border);
    max-width: 90%;
    word-wrap: break-word; /* Перенос длинных ссылок */
    text-align: left;
}
html[data-theme='light'] #lobbyLinksDisplay {
    background-color: #F3F4F6;
    border-color: #D1D5DB;
}
#lobbyLinksDisplay p {
    margin-bottom: 0.75rem;
    font-size: clamp(0.8rem, 2vmin, 1rem);
}
#lobbyLinksDisplay strong {
    color: var(--color-accent-blue);
    display: inline-block;
    min-width: 100px; /* Выравнивание текста ссылок */
}
html[data-theme='light'] #lobbyLinksDisplay strong { color: #1E40AF; }

#lobbyLinksDisplay a, #lobbyLinksDisplay span {
    color: var(--color-accent-blue);
    display: inline-block;
    margin-left: 0.5rem;
    word-break: break-all; /* Разрыв длинных слов/ссылок */
    background-color: var(--color-surface-2);
    padding: 0.2rem 0.4rem;
    border-radius: 0.25rem;
    border: 1px solid var(--color-border-medium);
}
/* Ссылки для светлой темы */
html[data-theme='light'] #lobbyLinksDisplay a,
html[data-theme='light'] #lobbyLinksDisplay span {
    color: #2563EB;
    background-color: #E5E7EB;
    border-color: #9CA3AF;
}
#lobbyLinksDisplay a:hover {
    text-decoration: none;
    background-color: var(--color-border-medium);
    color: var(--color-text-primary);
}
html[data-theme='light'] #lobbyLinksDisplay a:hover {
    background-color: #9CA3AF;
    color: #111827;
}

.copy-button {
    background-color: var(--color-accent-purple);
    color: #FFFFFF;
    border: none;
    padding: 0.1rem 0.4rem;
    font-size: 0.75em; /* Меньше основного текста */
    border-radius: 0.25rem;
    cursor: pointer;
    margin-left: 0.5rem;
    transition: background-color 0.2s;
    vertical-align: middle; /* Выравнивание с текстом */
}
html[data-theme='light'] .copy-button { background-color: #7C3AED; }
.copy-button:hover { background-color: color-mix(in srgb, var(--color-accent-purple), #000 10%); }
html[data-theme='light'] .copy-button:hover { background-color: color-mix(in srgb, #7C3AED, #000 10%); }

/* --- Кнопки в правом верхнем углу --- */
#topRightButtons {
    position: absolute;
    top: var(--gap-double);
    right: var(--gap-double);
    z-index: 10; /* Поверх других элементов */
    display: flex;
    gap: var(--gap-size);
    align-items: center;
}

/* Общие стили для кнопок Админ, Тема, Язык */
#adminButton, #themeToggleButton, #languageToggleButton {
    width: var(--top-right-button-size);
    height: var(--top-right-button-size);
    min-width: var(--top-right-button-min-size);
    min-height: var(--top-right-button-min-size);
    padding: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 0.375rem;
    cursor: pointer;
    transition: background-color 0.2s ease, box-shadow 0.2s ease, transform 0.1s ease, color 0.2s ease, border-color 0.2s ease;
    box-shadow: var(--shadow-md);
    border: 1px solid var(--color-border);
}

#adminButton {
    background-color: var(--color-accent-blue-dark);
    border-color: var(--color-accent-blue-dark);
    color: white;
    font-size: 0.75rem;
    font-weight: 600;
    width: auto; /* Ширина по контенту */
    padding: 0 1rem;
}
#adminButton:hover:not(:disabled) {
    background-color: color-mix(in srgb, var(--color-accent-blue-dark), #fff 10%);
    border-color: color-mix(in srgb, var(--color-accent-blue-dark), #fff 15%);
    box-shadow: var(--shadow-lg);
}
#adminButton:active {
    transform: scale(0.98);
    box-shadow: var(--shadow-sm);
}
/* Стили кнопки Админ для светлой темы */
html[data-theme='light'] #adminButton {
    background-color: #2563EB;
    border-color: #2563EB;
    color: white;
}
html[data-theme='light'] #adminButton:hover:not(:disabled) {
    background-color: color-mix(in srgb, #2563EB, #000 10%);
    border-color: color-mix(in srgb, #2563EB, #000 10%);
}

#themeToggleButton {
    background-color: var(--color-surface-2);
    color: var(--color-text-secondary);
    font-size: 1.1rem; /* Размер иконки */
    line-height: 1;
}
html[data-theme='light'] #themeToggleButton {
    background-color: #E5E7EB;
    color: #6B7280;
    border-color: #D1D5DB;
}
#themeToggleButton:hover {
    background-color: var(--color-surface-1);
    color: var(--color-text-primary);
    box-shadow: var(--shadow-lg);
}
html[data-theme='light'] #themeToggleButton:hover {
    background-color: #F3F4F6;
    color: #111827;
    border-color: #9CA3AF;
}
#themeToggleButton:active {
    transform: scale(0.98);
    box-shadow: var(--shadow-sm);
}

#languageToggleButton {
    background-color: var(--color-surface-2);
    color: var(--color-text-secondary);
    font-size: 0.75rem;
    font-weight: 600;
    line-height: 1;
    width: auto; /* Ширина по контенту */
    padding: 0 0.6rem;
}
html[data-theme='light'] #languageToggleButton {
    background-color: #E5E7EB;
    color: #6B7280;
    border-color: #D1D5DB;
}
#languageToggleButton:hover {
    background-color: var(--color-surface-1);
    color: var(--color-text-primary);
    box-shadow: var(--shadow-lg);
}
html[data-theme='light'] #languageToggleButton:hover {
    background-color: #F3F4F6;
    color: #111827;
    border-color: #9CA3AF;
}
#languageToggleButton:active {
    transform: scale(0.98);
    box-shadow: var(--shadow-sm);
}

/* --- Стили Страницы Драфта --- */
#draftPage {
    height: 100%;
    overflow: hidden; /* Скрываем скроллбар страницы драфта */
}

/* Имена команд */
.team-name {
    font-family: 'Cinzel', serif;
    text-shadow: none;
    text-align: center;
    font-size: clamp(1.2rem, 3.5vmin, 1.8rem);
    font-weight: 600;
    flex-shrink: 1; /* Разрешаем сжиматься */
    min-height: var(--team-name-min-height);
    line-height: var(--team-name-min-height);
    overflow: hidden; /* Скрываем текст, который не помещается */
    white-space: nowrap; /* Запрещаем перенос строки */
    text-overflow: ellipsis; /* Добавляем многоточие */
    padding: 0.2rem 0.4rem;
    border-radius: 0.375rem;
    background-color: transparent;
    transition: background-color 0.2s ease, color 0.2s ease;
    cursor: default; /* По умолчанию не редактируется */
}
#blue-team-name-h2 { justify-self: center; color: var(--color-blue-team); }
#red-team-name-h2 { justify-self: center; color: var(--color-red-team); }
/* Стили имен для светлой темы */
html[data-theme='light'] .team-name { color: var(--color-blue-team); }
html[data-theme='light'] #red-team-name-h2 { color: var(--color-red-team); }

/* Стили для редактируемых имен */
.team-name[contenteditable="true"]:hover {
    background-color: color-mix(in srgb, var(--color-surface-1), transparent 50%);
}
html[data-theme='light'] .team-name[contenteditable="true"]:hover {
    background-color: color-mix(in srgb, #F3F4F6, transparent 50%);
}
.team-name[contenteditable="true"]:focus {
    outline: 2px solid var(--color-accent-gold);
    background-color: color-mix(in srgb, var(--color-surface-2), transparent 30%);
    white-space: normal; /* Разрешаем перенос при фокусе */
    overflow: visible;
    box-shadow: var(--shadow-glow-gold);
}
html[data-theme='light'] .team-name[contenteditable="true"]:focus {
    outline-color: #D97706;
    background-color: color-mix(in srgb, #E5E7EB, transparent 30%);
    box-shadow: var(--shadow-glow-gold);
}

/* Поля для никнеймов в слотах пиков */
.nickname-input {
    font-family: 'Inter', sans-serif;
    background-color: transparent !important; /* Важно для перекрытия стилей */
    color: #fff; /* Белый текст с обводкой */
    border-radius: 0.25rem;
    padding: 2px 6px;
    /* Черная обводка текста для читаемости на любом фоне */
    text-shadow:
       -1px -1px 0 #000,
        1px -1px 0 #000,
       -1px  1px 0 #000,
        1px  1px 0 #000,
       -1px  0   0 #000,
        1px  0   0 #000,
        0   -1px 0 #000,
        0    1px 0 #000;
    position: absolute; /* Позиционирование внутри слота */
    bottom: 5px;
    width: auto;
    max-width: calc(100% - 16px); /* Не вылезает за края */
    z-index: 1; /* Поверх изображения чемпиона */
    font-size: calc(var(--nick-font-size) * 0.9);
    font-weight: 500;
    height: auto;
    min-height: var(--nick-min-height);
    pointer-events: auto; /* Разрешаем клики */
    cursor: text;
    overflow: hidden;
    white-space: nowrap;
    text-overflow: ellipsis;
    line-height: 1.3;
    transition: background-color 0.2s ease, box-shadow 0.2s ease;
    border: 1px solid transparent;
}
/* Плейсхолдер для пустого редактируемого ника */
.nickname-input[contenteditable="true"]:empty::before {
    content: attr(data-placeholder); /* Текст из атрибута data-placeholder */
    color: #fff;
    font-style: normal;
    opacity: 0.7;
    /* Обводка для плейсхолдера */
    text-shadow:
       -1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000, 1px 1px 0 #000,
       -1px 0 0 #000, 1px 0 0 #000, 0 -1px 0 #000, 0 1px 0 #000;
}
/* Выравнивание ников по краям */
[id^="blue-pick-"] .nickname-input { right: 8px; left: auto; text-align: right; }
[id^="red-pick-"] .nickname-input { left: 8px; right: auto; text-align: left; }

/* Стили для нередактируемых ников */
.nickname-input:not([contenteditable="true"]) {
    cursor: default;
    pointer-events: none; /* Запрещаем взаимодействие */
}
/* Стили при фокусе на редактируемом нике */
.nickname-input[contenteditable="true"]:focus {
    outline: none;
    white-space: normal;
    overflow: visible;
    text-overflow: clip;
    border: 1px solid var(--color-accent-gold);
    box-shadow: var(--shadow-glow-gold);
}
html[data-theme='light'] .nickname-input[contenteditable="true"]:focus {
    border-color: #D97706;
    box-shadow: var(--shadow-glow-gold);
}

/* Основная сетка макета страницы драфта */
#mainLayout {
    display: grid;
    grid-template-rows: auto 1fr; /* Верхний ряд авто, остальное - основная область */
    grid-template-columns: auto minmax(300px, 1fr) auto; /* Колонки: Синие, Центр, Красные */
    gap: var(--gap-size);
    height: 100%;
    width: 100%;
    opacity: 0; /* Скрываем до загрузки JS */
    transition: opacity 0.5s ease-in;
}
#mainLayout:not(.hidden) { opacity: 1; } /* Плавное появление */

/* Контейнер верхнего ряда (баны, инфо) */
#topRowContainer {
    grid-column: 1 / -1; /* Занимает все колонки */
    grid-row: 1;
    display: grid;
    grid-template-columns: subgrid; /* Использует колонки родителя (#mainLayout) */
    gap: var(--gap-size);
    align-items: center;
    margin-bottom: var(--gap-size);
    min-height: calc(var(--button-size) + var(--gap-size)); /* Минимальная высота */
}

/* Ячейки верхнего ряда */
.top-row-cell {
    display: flex;
    align-items: center;
    gap: var(--gap-size);
    min-width: 0; /* Предотвращает растягивание */
}
.top-row-cell.blue-info { grid-column: 1; justify-content: flex-start; }
.top-row-cell.center-controls { grid-column: 2; justify-content: center; }
.top-row-cell.red-info { grid-column: 3; justify-content: flex-end; }

/* Обертка для центральных элементов управления (имена, счет, таймер) */
.center-controls-wrapper {
    display: grid;
    grid-template-columns: minmax(0, 1fr) max-content max-content max-content minmax(0, 1fr); /* Имя Счет Таймер Счет Имя */
    align-items: center;
    gap: var(--gap-size);
    width: 100%;
}

/* Поля для счета */
.score-input {
    width: var(--score-size);
    height: var(--score-size);
    min-width: var(--score-min-size);
    min-height: var(--score-min-size);
    border: 1px solid var(--color-border);
    border-radius: 0.375rem;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: var(--score-font-size);
    font-weight: 600;
    flex-shrink: 0; /* Не сжимается */
    justify-self: center; /* Центрирование в ячейке грида */
    background-color: var(--color-surface-2);
    cursor: default;
    transition: background-color 0.2s ease, border-color 0.2s ease, box-shadow 0.2s ease;
}
html[data-theme='light'] .score-input {
    border-color: #D1D5DB;
    background-color: #E5E7EB;
    color: #111827;
}
.score-input[contenteditable="true"] { cursor: text; }
.score-input[contenteditable="true"]:hover {
    background-color: var(--color-surface-1);
    border-color: var(--color-border-medium);
}
html[data-theme='light'] .score-input[contenteditable="true"]:hover {
    background-color: #F3F4F6;
    border-color: #9CA3AF;
}
.score-input[contenteditable="true"]:focus {
    outline: none;
    border-color: var(--color-accent-gold);
    background-color: var(--color-surface-1);
    box-shadow: var(--shadow-glow-gold);
}
html[data-theme='light'] .score-input[contenteditable="true"]:focus {
    border-color: #D97706;
    background-color: #F3F4F6;
    box-shadow: var(--shadow-glow-gold);
}
/* Плейсхолдер для пустого счета */
.score-input:empty::before {
    content: "0";
    color: var(--color-text-placeholder);
    font-style: normal;
}
html[data-theme='light'] .score-input:empty::before { color: #9CA3AF; }
#blue-score { color: var(--color-blue-team); }
#red-score { color: var(--color-red-team); }

/* Таймер / Кнопка старта */
.timer-display-button {
    font-family: 'Inter', sans-serif;
    font-size: var(--timer-font-size);
    font-weight: 600;
    color: #FFFFFF;
    min-width: 6ch; /* Минимальная ширина для ##:## */
    text-align: center;
    background-color: var(--color-accent-green); /* Зеленый для старта */
    border: none;
    padding: 0.2rem 0.6rem;
    border-radius: 0.375rem;
    height: var(--button-size);
    min-height: var(--button-min-size);
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: background-color 0.2s ease, opacity 0.2s ease, color 0.2s ease, box-shadow 0.2s ease;
    flex-shrink: 0;
    box-shadow: var(--shadow-sm);
}
html[data-theme='light'] .timer-display-button {
    background-color: #16A34A;
    color: #FFFFFF;
}
.timer-display-button:hover:not(:disabled) {
    background-color: color-mix(in srgb, var(--color-accent-green), #000 10%);
    box-shadow: var(--shadow-md);
}
html[data-theme='light'] .timer-display-button:hover:not(:disabled) {
    background-color: color-mix(in srgb, #16A34A, #000 10%);
}
/* Стили неактивного/запущенного таймера */
.timer-display-button:disabled,
.timer-display-button.timer-disabled {
    cursor: default;
    background-color: var(--color-surface-2);
    color: var(--color-text-secondary);
    opacity: 0.8;
    box-shadow: none;
}
html[data-theme='light'] .timer-display-button:disabled,
html[data-theme='light'] .timer-display-button.timer-disabled {
    background-color: #E5E7EB;
    color: #6B7280;
}
.timer-display-button.timer-running { /* Когда таймер идет */
    background-color: var(--color-surface-2);
    color: var(--color-text-primary);
    cursor: default;
    opacity: 1;
    box-shadow: none;
}
html[data-theme='light'] .timer-display-button.timer-running {
    background-color: #E5E7EB;
    color: #111827;
}
/* Когда время заканчивается */
.timer-display-button.timer-ending {
    color: var(--color-accent-red);
    animation: pulse-red 1s infinite;
}
html[data-theme='light'] .timer-display-button.timer-ending { color: #DC2626; }

/* Анимация пульсации для таймера */
@keyframes pulse-red {
    0%, 100% { box-shadow: 0 0 0 0 color-mix(in srgb, var(--color-accent-red), transparent 60%); }
    50% { box-shadow: 0 0 5px 2px color-mix(in srgb, var(--color-accent-red), transparent 80%); }
}

/* Контейнеры для банов */
.bans-container {
    display: flex;
    justify-content: center;
    gap: var(--gap-half);
    flex-shrink: 0; /* Не сжимаются */
}

/* Основная область драфта (колонки + центр) */
#draftArea {
    grid-column: 1 / -1;
    grid-row: 2;
    display: grid;
    grid-template-columns: subgrid; /* Использует колонки родителя (#mainLayout) */
    gap: var(--gap-size);
    overflow: hidden; /* Предотвращаем выход за пределы */
    min-height: 0; /* Для корректного скролла внутри колонок */
    align-items: stretch; /* Растягиваем колонки по высоте */
}

/* Стили для колонок команд (синей и красной) */
.team-column {
    min-width: var(--team-col-min-width);
    width: auto;
    max-width: 480px;
    flex: 0 1 var(--team-col-min-width); /* Базовая ширина, разрешаем сжиматься */
    padding: var(--gap-size);
    border-radius: 0.5rem;
    box-shadow: none;
    display: flex;
    flex-direction: column;
    overflow-y: auto; /* Включаем скролл, если контент не помещается */
    scrollbar-width: none; /* Скрываем скроллбар Firefox */
    transition: opacity 0.3s ease, filter 0.3s ease, background-color 0.2s ease, border-color 0.2s ease;
    border: 1px solid var(--color-border);
    background-color: transparent;
}
html[data-theme='light'] .team-column { border-color: #D1D5DB; }
/* Скрываем скроллбар Webkit */
.team-column::-webkit-scrollbar { display: none; }

/* Полупрозрачный фон для колонок */
.team-column.blue-column {
    background-color: var(--color-blue-bg-transparent);
    border-color: color-mix(in srgb, var(--color-blue-team), transparent 70%);
}
.team-column.red-column {
    background-color: var(--color-red-bg-transparent);
    border-color: color-mix(in srgb, var(--color-red-team), transparent 70%);
}
html[data-theme='light'] .team-column.blue-column {
    background-color: rgba(37, 99, 235, 0.4);
    border-color: color-mix(in srgb, #2563EB, transparent 70%);
}
html[data-theme='light'] .team-column.red-column {
    background-color: rgba(220, 38, 38, 0.4);
    border-color: color-mix(in srgb, #DC2626, transparent 70%);
}

/* Стили для неактивных колонок */
.team-column.draft-disabled { /* Когда драфт не идет */
    pointer-events: none;
    opacity: 0.6;
    filter: grayscale(60%);
}
.team-column.role-disabled { /* Когда роль не позволяет действовать */
    opacity: 0.7;
    filter: grayscale(30%);
    pointer-events: none;
}
.team-column.role-disabled .pick-slot,
.team-column.role-disabled .ban-slot,
.team-column.role-disabled .nickname-input {
    pointer-events: none;
    cursor: not-allowed;
}

/* Контейнеры для пиков внутри колонок */
.picks-container {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: var(--gap-size);
    flex-grow: 1; /* Занимает все доступное место в колонке */
    justify-content: space-around; /* Равномерное распределение слотов */
    width: 100%;
    min-height: 0; /* Для корректной работы flex-grow */
    margin-top: var(--gap-size);
}

/* Общие стили для слотов пиков и банов */
.pick-slot, .ban-slot {
    background-color: var(--color-surface-2);
    border: 1px solid var(--color-border);
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: hidden; /* Обрезаем изображение */
    position: relative; /* Для позиционирования ников/изображений */
    flex-shrink: 0; /* Не сжимаются */
    border-radius: 0.375rem;
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
    transition: border-color 0.2s ease, box-shadow 0.2s ease, background-color 0.2s ease;
    box-shadow: var(--shadow-sm);
}
html[data-theme='light'] .pick-slot,
html[data-theme='light'] .ban-slot {
    background-color: #E5E7EB;
    border-color: #D1D5DB;
}

.ban-slot {
    width: var(--ban-size);
    height: var(--ban-size);
    min-width: var(--ban-min-size);
    min-height: var(--ban-min-size);
    border-radius: 0.25rem; /* Чуть меньше радиус */
}

.pick-slot {
    min-height: var(--pick-min-height);
    width: 100%;
    height: auto;
    flex-grow: 1; /* Растягивается по высоте */
    position: relative;
}

/* Изображения внутри слотов */
.pick-slot img, .ban-slot img {
    display: block;
    width: 100%;
    height: 100%;
    object-fit: cover; /* Масштабирует изображение с сохранением пропорций */
    position: absolute;
    inset: 0;
    z-index: 0; /* Под никнеймом */
    transition: filter 0.3s ease, opacity 0.3s ease;
}

/* Подсветка активного слота */
.highlight-action {
    border-color: var(--color-accent-gold);
    box-shadow: var(--shadow-glow-gold);
    background-color: color-mix(in srgb, var(--color-surface-2), var(--color-accent-gold) 10%);
}
html[data-theme='light'] .highlight-action {
    border-color: #D97706;
    box-shadow: var(--shadow-glow-gold);
    background-color: color-mix(in srgb, #E5E7EB, #D97706 10%);
}

/* Подсветка слота, выбранного для обмена */
.swap-selected {
    border-color: var(--color-accent-blue);
    box-shadow: var(--shadow-glow-blue);
}
html[data-theme='light'] .swap-selected {
    border-color: #2563EB;
    box-shadow: var(--shadow-glow-blue);
}

/* Анимация мигания для предпросмотра */
@keyframes flash {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.5; }
}
.preview-flash > img {
    animation: flash 1s infinite ease-in-out;
}

/* Центральная колонка (сетка чемпионов и управление) */
#championGridContainer {
    grid-column: 2;
    background-color: transparent;
    border-radius: 0.5rem;
    padding: 0;
    box-shadow: none;
    display: flex;
    flex-direction: column;
    overflow: hidden; /* Управляем скроллом внутри */
    min-width: 300px;
    border: none;
}

/* Область отображения глобальных банов */
#globallyBannedDisplay {
    flex-shrink: 0; /* Не сжимается */
    margin-bottom: var(--gap-size);
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: var(--gap-half);
    width: 100%;
    min-height: calc(var(--global-ban-icon-min-size) + var(--gap-half));
    border-bottom: 1px solid var(--color-border);
    padding-bottom: var(--gap-half);
    transition: opacity 0.3s ease, max-height 0.3s ease, margin 0.3s ease, padding 0.3s ease;
}
html[data-theme='light'] #globallyBannedDisplay { border-bottom-color: #D1D5DB; }
/* Скрытие блока глобальных банов */
#globallyBannedDisplay.hidden {
    opacity: 0;
    max-height: 0;
    margin-bottom: 0;
    padding-bottom: 0;
    border-bottom: none;
    overflow: hidden;
}

.global-bans-row {
    display: flex;
    justify-content: space-between;
    width: 100%;
    align-items: flex-start;
    gap: var(--gap-size);
}

#global-bans-blue, #global-bans-red {
    display: grid;
    grid-template-columns: repeat(5, auto); /* 5 иконок в ряд */
    gap: var(--gap-half);
    align-items: center;
    min-height: var(--global-ban-icon-min-size);
}
#global-bans-blue { justify-items: start; }
#global-bans-red { justify-items: end; }

/* Иконки глобально забаненных чемпионов */
.global-ban-icon {
    width: var(--global-ban-icon-size);
    height: var(--global-ban-icon-size);
    min-width: var(--global-ban-icon-min-size);
    min-height: var(--global-ban-icon-min-size);
    background-size: cover;
    background-position: center;
    border-radius: 0.25rem;
    overflow: hidden;
    flex-shrink: 0;
    background-color: var(--color-surface-1);
    border: 1px solid var(--color-border);
    opacity: 0.6; /* Полупрозрачные */
    cursor: not-allowed; /* Не кликабельны */
    position: relative;
    box-shadow: var(--shadow-sm);
}
html[data-theme='light'] .global-ban-icon {
    background-color: #F3F4F6;
    border-color: #D1D5DB;
}
.global-ban-icon img {
    display: block;
    width: 100%;
    height: 100%;
    object-fit: cover;
    filter: grayscale(90%) brightness(60%); /* Затемненные и обесцвеченные */
}

/* Панель управления (поиск, кнопки, фильтры) */
.search-controls-wrapper {
    display: flex; /* Используем flexbox */
    align-items: center;
    gap: var(--gap-half);
    margin-bottom: var(--gap-size);
    flex-shrink: 0; /* Не сжимается по высоте */
    padding: var(--gap-half);
    background-color: var(--color-surface-1);
    border-radius: 0.375rem;
    border: 1px solid var(--color-border);
    box-shadow: var(--shadow-md);
    flex-wrap: wrap; /* Разрешаем перенос элементов */
}
html[data-theme='light'] .search-controls-wrapper {
    background-color: #F3F4F6;
    border-color: #D1D5DB;
}
/* Стилизация скроллбара для панели управления (если появится) */
.search-controls-wrapper::-webkit-scrollbar { height: 4px; }
.search-controls-wrapper::-webkit-scrollbar-track { background: transparent; }
.search-controls-wrapper::-webkit-scrollbar-thumb { background-color: var(--color-border-medium); border-radius: 2px; }
html[data-theme='light'] .search-controls-wrapper::-webkit-scrollbar-thumb { background-color: #9CA3AF; }

/* Поле поиска */
#championSearch {
    flex-grow: 1; /* Занимает доступное пространство */
    flex-shrink: 1; /* Разрешаем сжиматься */
    min-width: 50px; /* Минимальная ширина */
    font-size: clamp(0.85rem, 2vmin, 1rem);
    height: var(--filter-button-size); /* Высота как у кнопок фильтра */
    min-height: 30px;
    background-color: var(--color-surface-2);
    border: 1px solid var(--color-border);
    border-radius: 0.25rem;
    padding: 0 0.5rem;
    color: var(--color-text-primary);
    transition: border-color 0.2s ease, box-shadow 0.2s ease, background-color 0.2s ease;
}
html[data-theme='light'] #championSearch {
    background-color: #E5E7EB;
    border-color: #D1D5DB;
    color: #111827;
}
#championSearch::placeholder { color: var(--color-text-placeholder); }
html[data-theme='light'] #championSearch::placeholder { color: #9CA3AF; }
#championSearch:focus {
    outline: none;
    border-color: var(--color-accent-blue);
    box-shadow: var(--shadow-glow-blue);
    background-color: var(--color-surface-1); /* Небольшое изменение фона при фокусе */
}
html[data-theme='light'] #championSearch:focus {
    border-color: #2563EB;
    box-shadow: var(--shadow-glow-blue);
    background-color: #F3F4F6;
}

/* Контейнер для кнопок фильтра */
#roleFilterButtons {
    display: flex;
    gap: var(--gap-half);
    flex-shrink: 0; /* Не сжимается */
}

/* Центрирование кнопок с помощью auto margins */
#confirmPickBanButton {
    flex-shrink: 0;
    margin-left: auto; /* Отодвигает кнопку подтверждения от поиска/фильтров */
}
#clearPicksButton { /* Кнопка после Confirm */
    margin-right: auto; /* Отодвигает остальные кнопки вправо */
}

/* Общие стили для кнопок действий */
.action-button {
    color: var(--color-text-primary);
    width: var(--button-size); /* Базовая ширина/высота */
    height: var(--button-size);
    min-width: var(--button-min-size);
    min-height: var(--button-min-size);
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 0;
    border-radius: 0.375rem;
    font-weight: 500;
    transition: background-color 0.2s ease, opacity 0.2s ease, box-shadow 0.2s ease, color 0.2s ease, transform 0.1s ease, border-color 0.2s ease;
    border: 1px solid var(--color-border);
    cursor: pointer;
    font-size: calc(var(--button-size) * 0.45); /* Размер шрифта/иконки зависит от размера кнопки */
    line-height: 1;
    flex-shrink: 0; /* По умолчанию не сжимаются */
    background-color: var(--color-surface-2);
    box-shadow: var(--shadow-sm);
}
html[data-theme='light'] .action-button {
    color: #111827;
    border-color: #D1D5DB;
    background-color: #E5E7EB;
}
/* Эффекты при наведении и нажатии */
.action-button:hover:not(:disabled) {
    background-color: var(--color-border-medium);
    border-color: var(--color-text-secondary);
    color: #fff; /* Белый текст при наведении в темной теме */
    box-shadow: var(--shadow-md);
}
html[data-theme='light'] .action-button:hover:not(:disabled) {
    background-color: #9CA3AF;
    border-color: #6B7280;
    color: #111827; /* Черный текст при наведении в светлой теме */
}
.action-button:active:not(:disabled) {
    transform: scale(0.95); /* Эффект нажатия */
    background-color: var(--color-border);
    box-shadow: none;
}
html[data-theme='light'] .action-button:active:not(:disabled) {
    background-color: #D1D5DB;
}
/* Стиль фокуса для доступности */
.action-button:focus-visible {
    outline: 2px solid var(--color-accent-blue);
    outline-offset: 1px;
    box-shadow: var(--shadow-glow-blue);
    border-color: var(--color-accent-blue);
}
html[data-theme='light'] .action-button:focus-visible {
    outline-color: #2563EB;
    box-shadow: var(--shadow-glow-blue);
    border-color: #2563EB;
}
/* Стиль неактивной кнопки */
.action-button:disabled {
    opacity: 0.5;
    cursor: not-allowed;
    box-shadow: none;
    background-color: var(--color-surface-2);
    border-color: var(--color-border);
    color: var(--color-text-secondary);
}
html[data-theme='light'] .action-button:disabled {
    background-color: #E5E7EB;
    border-color: #D1D5DB;
    color: #6B7280;
}

/* Кнопки с иконками (чуть больше размер иконки) */
.icon-button {
    font-size: calc(var(--button-size) * 0.55);
    width: var(--button-size);
}

/* Особые стили для некоторых кнопок */
#confirmPickBanButton {
    width: auto; /* Ширина по тексту */
    min-width: calc(var(--button-size) * 3); /* Минимальная ширина */
    padding-left: 1rem; /* Отступы */
    padding-right: 1rem;
    height: var(--button-size);
    min-height: var(--button-min-size);
    font-size: calc(var(--button-size) * 0.55);
    background-color: var(--color-accent-green); /* Зеленая кнопка подтверждения */
    color: #FFFFFF;
    border-color: var(--color-accent-green);
}
html[data-theme='light'] #confirmPickBanButton {
    background-color: #16A34A;
    border-color: #16A34A;
    color: #FFFFFF;
}
#confirmPickBanButton:hover:not(:disabled) {
    background-color: color-mix(in srgb, var(--color-accent-green), #000 10%);
}
html[data-theme='light'] #confirmPickBanButton:hover:not(:disabled) {
    background-color: color-mix(in srgb, #16A34A, #000 10%);
}

#resetButton { /* Красная кнопка сброса */
    background-color: var(--color-accent-red);
    color: #FFFFFF;
    border-color: var(--color-accent-red);
}
html[data-theme='light'] #resetButton {
    background-color: #DC2626;
    border-color: #DC2626;
    color: #FFFFFF;
}
#resetButton:hover:not(:disabled) {
    background-color: color-mix(in srgb, var(--color-accent-red), #000 10%);
}
html[data-theme='light'] #resetButton:hover:not(:disabled) {
    background-color: color-mix(in srgb, #DC2626, #000 10%);
}

#nextDraftButton { /* Золотая кнопка след. драфта */
    background-color: var(--color-accent-gold);
    color: #FFFFFF;
    border-color: var(--color-accent-gold);
}
html[data-theme='light'] #nextDraftButton {
    background-color: #D97706;
    border-color: #D97706;
    color: #FFFFFF;
}
#nextDraftButton:hover:not(:disabled) {
    background-color: color-mix(in srgb, var(--color-accent-gold), #000 10%);
}
html[data-theme='light'] #nextDraftButton:hover:not(:disabled) {
    background-color: color-mix(in srgb, #D97706, #000 10%);
}

/* Кнопки фильтра ролей */
.filter-button {
    background-color: var(--color-surface-2);
    width: var(--filter-button-size);
    height: var(--filter-button-size);
    font-size: calc(var(--filter-button-size) * 0.4); /* Маленький текст */
    font-weight: 600;
    min-width: 30px;
    min-height: 30px;
    padding: 0 2px; /* Чтобы текст не прилипал к краям */
    border: 1px solid var(--color-border);
    color: var(--color-text-secondary);
}
html[data-theme='light'] .filter-button {
    background-color: #E5E7EB;
    border-color: #D1D5DB;
    color: #6B7280;
}
.filter-button:hover:not(:disabled) {
    background-color: var(--color-border-medium);
    color: var(--color-text-primary);
}
html[data-theme='light'] .filter-button:hover:not(:disabled) {
    background-color: #9CA3AF;
    color: #111827;
}
/* Активная кнопка фильтра */
.filter-button.active {
    background-color: var(--color-accent-blue);
    border-color: var(--color-accent-blue);
    color: #FFFFFF;
    box-shadow: var(--shadow-glow-blue);
}
html[data-theme='light'] .filter-button.active {
    background-color: #2563EB;
    border-color: #2563EB;
    color: #FFFFFF;
    box-shadow: var(--shadow-glow-blue);
}

/* Сетка чемпионов */
#championGrid {
    display: flex;
    flex-wrap: wrap; /* Перенос карточек */
    justify-content: center; /* Центрирование карточек */
    gap: var(--gap-half); /* Отступы между карточками */
    overflow-y: auto; /* Включаем скролл */
    align-content: flex-start; /* Карточки начинаются сверху */
    flex-grow: 1; /* Занимает все доступное место */
    min-height: 0; /* Для корректной работы flex-grow и скролла */
    transition: opacity 0.3s ease;
    padding: var(--gap-size);
    background-color: var(--color-surface-1);
    border-radius: 0.5rem;
    border: 1px solid var(--color-border);
}
html[data-theme='light'] #championGrid {
    background-color: #F3F4F6;
    border-color: #D1D5DB;
}
/* Стилизация скроллбара сетки */
#championGrid::-webkit-scrollbar { width: 6px; }
#championGrid::-webkit-scrollbar-track { background: transparent; }
#championGrid::-webkit-scrollbar-thumb { background-color: var(--color-border); border-radius: 3px; }
html[data-theme='light'] #championGrid::-webkit-scrollbar-thumb { background-color: #D1D5DB; }
#championGrid::-webkit-scrollbar-thumb:hover { background-color: var(--color-border-medium); }
html[data-theme='light'] #championGrid::-webkit-scrollbar-thumb:hover { background-color: #9CA3AF; }
/* Скроллбар для Firefox */
#championGrid {
    scrollbar-width: thin;
    scrollbar-color: var(--color-border) transparent;
}
html[data-theme='light'] #championGrid { scrollbar-color: #D1D5DB transparent; }

/* Карточка чемпиона */
.champion-card {
    width: var(--card-size);
    height: var(--card-size);
    min-width: var(--card-min-size);
    min-height: var(--card-min-size);
    border-radius: 0.25rem;
    overflow: hidden; /* Обрезаем изображение */
    background-color: var(--color-surface-2);
    cursor: pointer;
    transition: transform 0.15s ease-in-out, box-shadow 0.2s ease, border-color 0.2s ease;
    position: relative;
    flex-shrink: 0; /* Не сжимаются */
    border: 1px solid var(--color-border);
    box-shadow: var(--shadow-sm);
    padding: 0; /* Убираем внутренние отступы */
}
html[data-theme='light'] .champion-card {
    background-color: #E5E7EB;
    border-color: #D1D5DB;
}
.champion-card img {
    width: 100%;
    height: 100%;
    object-fit: cover; /* Масштабирование изображения */
    display: block;
    transition: filter 0.2s ease, transform 0.2s ease;
    pointer-events: none; /* Изображение не перехватывает клики */
}
/* Эффект при наведении на карточку */
.champion-card:hover {
    transform: scale(1.05); /* Немного увеличиваем */
    box-shadow: var(--shadow-md);
    border-color: var(--color-border-medium);
}
html[data-theme='light'] .champion-card:hover { border-color: #9CA3AF; }
.champion-card:hover img {
    transform: scale(1.03); /* Небольшое увеличение изображения внутри */
}
/* Стиль фокуса для доступности */
.champion-card:focus-visible {
    outline: 2px solid var(--color-accent-blue);
    outline-offset: 1px;
    box-shadow: var(--shadow-glow-blue);
    border-color: var(--color-accent-blue);
    transform: scale(1.03);
}
html[data-theme='light'] .champion-card:focus-visible {
    outline-color: #2563EB;
    box-shadow: var(--shadow-glow-blue);
    border-color: #2563EB;
}
/* Стиль выбранной/забаненной карточки */
.champion-card.selected {
    border-color: var(--color-accent-gold);
}
html[data-theme='light'] .champion-card.selected { border-color: #D97706; }
.champion-card.selected img {
    filter: grayscale(80%) brightness(50%) sepia(30%);
    opacity: 0.7;
}
html[data-theme='light'] .champion-card.selected img {
    filter: grayscale(50%) brightness(80%) sepia(10%);
    opacity: 0.8;
}
/* Стиль неактивной карточки (глобальный бан или уже выбрана) */
.champion-card.disabled {
    pointer-events: none;
    opacity: 0.5;
    cursor: not-allowed;
    box-shadow: none;
}
.champion-card.disabled img {
    filter: grayscale(100%) brightness(40%);
    transform: none;
}
html[data-theme='light'] .champion-card.disabled img { filter: grayscale(100%) brightness(70%); }
.champion-card.disabled:hover {
    transform: none;
    border-color: var(--color-border);
}
html[data-theme='light'] .champion-card.disabled:hover { border-color: #D1D5DB; }

/* Всплывающая подсказка (Tooltip) */
.tooltip {
    position: fixed; /* Фиксированное позиционирование */
    background-color: var(--color-tooltip-bg);
    color: var(--color-tooltip-text);
    padding: 0.5rem 0.8rem;
    border-radius: 0.375rem;
    font-size: 0.9rem;
    font-family: 'Inter', sans-serif;
    white-space: nowrap; /* Запрет переноса текста */
    z-index: 100; /* Поверх большинства элементов */
    pointer-events: none; /* Не мешает кликам */
    opacity: 0; /* Скрыта по умолчанию */
    transition: opacity 0.15s ease-in-out;
    box-shadow: var(--shadow-lg);
    border: 1px solid var(--color-border-medium);
}
html[data-theme='light'] .tooltip {
    background-color: rgba(243, 244, 246, 0.95);
    color: #111827;
    border-color: #9CA3AF;
}
.tooltip.visible { opacity: 1; } /* Появление подсказки */
.tooltip-title { /* Имя чемпиона */
    font-weight: 600;
    display: block;
    margin-bottom: 0.1rem;
    color: var(--color-accent-gold);
}
html[data-theme='light'] .tooltip-title { color: #D97706; }
.tooltip-name { /* Титул чемпиона */
    font-weight: 400;
    color: var(--color-text-secondary);
    font-size: 0.8rem;
}
html[data-theme='light'] .tooltip-name { color: #6B7280; }

/* Статусное сообщение внизу экрана */
#statusMessage {
    position: fixed;
    bottom: 1rem;
    left: 50%;
    transform: translateX(-50%); /* Центрирование */
    background-color: var(--color-surface-1);
    color: var(--color-text-primary);
    padding: 0.6rem 1.2rem;
    border-radius: 0.375rem;
    z-index: 90;
    opacity: 0; /* Скрыто по умолчанию */
    transition: opacity 0.3s ease-in-out, transform 0.3s ease-in-out;
    font-family: 'Inter', sans-serif;
    font-size: 0.9rem;
    text-align: center;
    border: 1px solid var(--color-border-medium);
    box-shadow: var(--shadow-md);
    transform: translate(-50%, 10px); /* Начальное положение снизу */
}
html[data-theme='light'] #statusMessage {
    background-color: #F3F4F6;
    color: #111827;
    border-color: #9CA3AF;
}
#statusMessage.visible {
    opacity: 1;
    transform: translate(-50%, 0); /* Плавное появление снизу */
}

/* Кнопка фильтра приоритетных чемпионов */
#newPriorityFilterButton {
    color: var(--color-accent-gold);
    width: var(--button-size);
    height: var(--button-size);
    padding: 0;
    font-size: calc(var(--button-size) * 0.55);
}
html[data-theme='light'] #newPriorityFilterButton { color: #D97706; }
#newPriorityFilterButton:hover:not(:disabled) {
    background-color: var(--color-border-medium);
    border-color: var(--color-accent-gold);
    color: color-mix(in srgb, var(--color-accent-gold), #fff 30%);
}
html[data-theme='light'] #newPriorityFilterButton:hover:not(:disabled) {
    background-color: #9CA3AF;
    border-color: #D97706;
    color: color-mix(in srgb, #D97706, #fff 30%);
}
/* Стиль активного фильтра приоритета */
#newPriorityFilterButton[aria-pressed="true"] {
    background-color: var(--color-accent-gold);
    border-color: var(--color-accent-gold);
    color: #0a0f1f; /* Темный текст на светлом фоне */
    box-shadow: var(--shadow-glow-gold);
}
html[data-theme='light'] #newPriorityFilterButton[aria-pressed="true"] {
    background-color: #D97706;
    border-color: #D97706;
    color: #FFFFFF; /* Белый текст */
    box-shadow: var(--shadow-glow-gold);
}

/* --- Адаптивные стили --- */

/* Планшеты и небольшие десктопы */
@media (max-width: 1280px) {
     .search-controls-wrapper {
         flex-wrap: wrap; /* Разрешаем перенос кнопок управления */
     }
}

/* Планшеты */
@media (max-width: 1024px) {
    :root { /* Уменьшаем размеры элементов */
        --card-size: 11.25vh;
        --ban-size: 5vh;
        --button-size: 4vh;
        --filter-button-size: 3.5vh;
        --score-size: 4vh;
        --nick-font-size: 2.5vh;
        --gap-size: 0.3rem; /* Уменьшаем отступы */
        --team-col-min-width: 220px;
    }
     .team-name {
         font-size: clamp(1rem, 3vmin, 1.4rem);
         max-width: 200px; /* Ограничиваем ширину имени */
     }
     .search-controls-wrapper {
         margin-bottom: var(--gap-size);
         padding: var(--gap-half);
     }
}

/* Небольшие планшеты и крупные телефоны */
@media (max-width: 768px) {
     :root { /* Еще уменьшаем размеры */
        --card-size: 10.5vh;
        --ban-size: 4.5vh;
        --button-size: 3.8vh;
        --filter-button-size: 3.2vh;
        --score-size: 3.8vh;
        --nick-font-size: 2.2vh;
        --team-col-min-width: 180px;
     }
    #mainLayout {
        grid-template-columns: auto minmax(150px, 1fr) auto; /* Уменьшаем центральную колонку */
        gap: var(--gap-half);
    }
     .center-controls-wrapper {
         grid-template-columns: 1fr auto auto auto 1fr; /* Сохраняем структуру центра */
         gap: var(--gap-half);
     }
    .team-name {
        max-width: 150px;
        font-size: clamp(0.9rem, 2.8vmin, 1.2rem);
    }
    .bans-container { gap: 2px; } /* Уменьшаем отступ между банами */
    #roleFilterButtons { justify-content: flex-start; } /* Фильтры слева при переносе */
    .picks-container { gap: 2px; } /* Уменьшаем отступ между пиками */
}

/* Телефоны */
@media (max-width: 480px) {
    body { padding: 2px; } /* Минимальные отступы */
     #app-container { padding: 2px; }
    :root { /* Самые маленькие размеры */
        --card-size: 9.75vh;
        --ban-size: 4vh;
        --button-size: 3.5vh;
        --filter-button-size: 3vh;
        --score-size: 3.5vh;
        --nick-font-size: 2vh;
        --card-min-size: 57px;
        --ban-min-size: 25px;
        --button-min-size: 28px; /* Минимальный размер для тач-интерфейса */
        --score-min-size: 28px;
        --team-col-min-width: 90px; /* Узкие колонки */
    }
     #mainLayout {
         grid-template-columns: auto minmax(100px, 1fr) auto; /* Очень узкая центральная колонка */
         gap: 2px;
     }
     /* Перестраиваем верхний ряд */
     #topRowContainer {
         grid-template-columns: 1fr auto 1fr; /* Баны - Центр - Баны */
     }
     .top-row-cell.blue-info { grid-column: 1; }
     .top-row-cell.center-controls { grid-column: 2; }
     .top-row-cell.red-info { grid-column: 3; }
     /* Центральные элементы управления переносятся */
     .center-controls-wrapper {
         display: flex;
         flex-wrap: wrap;
         justify-content: center;
     }
     #timerDisplay {
         order: -1; /* Таймер становится первым */
         margin-bottom: var(--gap-half);
     }
     .team-name {
         max-width: 100px;
         font-size: clamp(0.8rem, 2.5vmin, 1rem);
     }
     /* Баны в 2 ряда */
     .bans-container {
         display: grid;
         grid-template-columns: repeat(3, 1fr); /* 3 бана в ряду */
     }
     #blue-ban-4, #blue-ban-5, #red-ban-4, #red-ban-5 { margin-top: 2px; } /* Небольшой отступ для второго ряда банов */

     .filter-button {
         min-width: 28px;
         min-height: 28px;
         font-size: 0.6rem; /* Очень мелкий шрифт */
     }
     #championGrid { gap: 2px; } /* Минимальный отступ в сетке */
     .team-column { padding: var(--gap-half); }
     .picks-container { gap: 1px; }
     /* Скрываем никнеймы на очень маленьких экранах */
     .nickname-input { display: none; }

     /* Центрируем кнопки управления при переносе */
     .search-controls-wrapper { justify-content: center; }
     /* Убираем auto margins при переносе */
     #confirmPickBanButton { margin-left: 0; }
     #clearPicksButton { margin-right: 0; }

     /* Кнопки в углу чуть ближе к краю */
     #topRightButtons { top: var(--gap-size); right: var(--gap-size); }
}
